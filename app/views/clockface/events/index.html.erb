<div class="container">
  <%= render "clockface/application/flash" %>

  <div class="events-index__heading-banner">
    <h1>
      <%= t(".heading").downcase %>
    </h1>

    <%= link_to clockface.new_event_path, class: "events-index__new-link" do %>
      <button type="button" class="events-index__new-btn btn btn-success">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
      </button>
    <% end %>
  </div>

  <table class="events-index__events table table-striped sortable">
    <thead class="thead-inverse">
      <tr class="events-index__events-header-row">
        <th class="events-index__events-column events-index__events-column--id">
          <%= Clockface::Event.human_attribute_name("id") %>
        </th>

        <th class="events-index__events-column events-index__events-column--name">
          <%= Clockface::Event.human_attribute_name("name") %>
        </th>

        <th class="events-index__events-column events-index__events-column--period">
          <%= Clockface::Event.human_attribute_name("period") %>
        </th>

        <th class="events-index__events-column events-index__events-column--at">
          <%= Clockface::Event.human_attribute_name("at") %>
        </th>

        <th class="events-index__events-column events-index__events-column--time_zone">
          <%= Clockface::Event.human_attribute_name("time_zone") %>
        </th>

        <th class="events-index__events-column events-index__events-column--if_condition">
          <%= Clockface::Event.human_attribute_name("if_condition") %>
        </th>

        <th class="events-index__events-column events-index__events-column--last_triggered_at">
          <%= Clockface::Event.human_attribute_name("last_triggered_at") %>
        </th>

        <th class="events-index__events-column events-index__events-column--enabled">
          <%= Clockface::Event.human_attribute_name("enabled") %>
        </th>

        <th class="events-index__events-column events-index__events-column--edit sorttable_nosort">
        </th>

        <th class="events-index__events-column events-index__events-column--destroy sorttable_nosort">
        </th>
      </tr>
    </thead>
    <tbody>
    <% @events.each do |event| %>
    <tr class="events-index__events-row" data-id="<%= event.id %>">
      <th scope="row" class="events-index__events-column events-index__events-column--id">
        <%= event.id %>
      </th>

      <td class="events-index__events-column events-index__events-column--name">
        <%= event.name %>
      </td>

      <td class="events-index__events-column events-index__events-column--period">
        <%= event.period %>
      </td>

      <td class="events-index__events-column events-index__events-column--at">
        <%= event.at %>
      </td>

      <td class="events-index__events-column events-index__events-column--time_zone">
        <%= event.time_zone %>
      </td>

      <td class="events-index__events-column events-index__events-column--if_condition">
        <%= event.if_condition %>
      </td>

      <td class="events-index__events-column events-index__events-column--last_triggered_at">
        <%= raw event.last_triggered_at %>
      </td>

      <td class="events-index__events-column events-index__events-column--enabled" sorttable_customkey="<%= event.enabled? ? 1 : 0 %>">
        <span class="<%= event.enabled? ? "enabled-event" : "disabled-event" %> glyphicon glyphicon-<%= event.enabled? ? "ok" : "remove" %>" aria-hidden="true"></span>
      </td>

      <td class="events-index__events-column events-index__events-column--edit">
        <%= link_to clockface.edit_event_path(event) do %>
          <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
        <% end %>
      </td>

      <td class="events-index__events-column events-index__events-column--destroy">
        <%= link_to clockface.event_delete_path(event) do %>
          <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
        <% end %>
      </td>
    </tr>
    <% end %>
    </tbody>
  </table>
</div>
