<div class="container">
  <%= render "clockface/application/flash" %>

  <div class="jobs-index__heading-banner">
    <h1>
      <%= t(".heading").downcase %>
    </h1>

    <%= link_to clockface.new_job_path, class: "jobs-index__new-link" do %>
      <button type="button" class="jobs-index__new-btn btn btn-success">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
      </button>
    <% end %>
  </div>

  <table class="jobs-index__jobs table table-striped sortable">
    <thead class="thead-inverse">
      <tr class="jobs-index__jobs-header-row">
        <th class="jobs-index__jobs-column jobs-index__jobs-column--id">
          <%= Clockface::ClockworkScheduledJob.human_attribute_name("id") %>
        </th>

        <th class="jobs-index__jobs-column jobs-index__jobs-column--name">
          <%= Clockface::ClockworkScheduledJob.human_attribute_name("name") %>
        </th>

        <th class="jobs-index__jobs-column jobs-index__jobs-column--period">
          <%= Clockface::ClockworkScheduledJob.human_attribute_name("period") %>
        </th>

        <th class="jobs-index__jobs-column jobs-index__jobs-column--at">
          <%= Clockface::ClockworkScheduledJob.human_attribute_name("at") %>
        </th>

        <th class="jobs-index__jobs-column jobs-index__jobs-column--time_zone">
          <%= Clockface::ClockworkScheduledJob.human_attribute_name("time_zone") %>
        </th>

        <th class="jobs-index__jobs-column jobs-index__jobs-column--if_condition">
          <%= Clockface::ClockworkScheduledJob.human_attribute_name("if_condition") %>
        </th>

        <th class="jobs-index__jobs-column jobs-index__jobs-column--last_run_at">
          <%= Clockface::ClockworkScheduledJob.human_attribute_name("last_run_at") %>
        </th>

        <th class="jobs-index__jobs-column jobs-index__jobs-column--enabled">
          <%= Clockface::ClockworkScheduledJob.human_attribute_name("enabled") %>
        </th>

        <th class="jobs-index__jobs-column jobs-index__jobs-column--edit sorttable_nosort">
        </th>

        <th class="jobs-index__jobs-column jobs-index__jobs-column--destroy sorttable_nosort">
        </th>
      </tr>
    </thead>
    <tbody>
    <% @jobs.each do |job| %>
    <tr class="jobs-index__jobs-row" data-id="<%= job.id %>">
      <th scope="row" class="jobs-index__jobs-column jobs-index__jobs-column--id">
        <%= job.id %>
      </th>

      <td class="jobs-index__jobs-column jobs-index__jobs-column--name">
        <%= job.name %>
      </td>

      <td class="jobs-index__jobs-column jobs-index__jobs-column--period">
        <%= job.period %>
      </td>

      <td class="jobs-index__jobs-column jobs-index__jobs-column--at">
        <%= job.at %>
      </td>

      <td class="jobs-index__jobs-column jobs-index__jobs-column--time_zone">
        <%= job.time_zone %>
      </td>

      <td class="jobs-index__jobs-column jobs-index__jobs-column--if_condition">
        <%= job.if_condition %>
      </td>

      <td class="jobs-index__jobs-column jobs-index__jobs-column--last_run_at">
        <%= raw job.last_run_at %>
      </td>

      <td class="jobs-index__jobs-column jobs-index__jobs-column--enabled" sorttable_customkey="<%= job.enabled? ? 1 : 0 %>">
        <span class="<%= job.enabled? ? "enabled-job" : "disabled-job" %> glyphicon glyphicon-<%= job.enabled? ? "ok" : "remove" %>" aria-hidden="true"></span>
      </td>

      <td class="jobs-index__jobs-column jobs-index__jobs-column--edit">
        <%= link_to clockface.edit_job_path(job) do %>
          <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
        <% end %>
      </td>

      <td class="jobs-index__jobs-column jobs-index__jobs-column--destroy">
        <%= link_to clockface.job_delete_path(job) do %>
          <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
        <% end %>
      </td>
    </tr>
    <% end %>
    </tbody>
  </table>
</div>
